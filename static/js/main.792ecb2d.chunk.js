(this["webpackJsonpjpg-to-pdf-merger"]=this["webpackJsonpjpg-to-pdf-merger"]||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),o=n.n(c),i=(n(98),n(22)),s=n(31),d=n(74),u=n.n(d),j=n(117),l=n(5);function b(e){var t=e.setPhotos,n=Object(a.createRef)();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",{type:"file",style:{display:"none"},multiple:!0,ref:n,onChange:function(e){return function(e){var n=Array.from(e.target.files).map((function(e){return{id:u()(),photo:e,name:e.name,lastModified:e.lastModified}}));t((function(e){return[].concat(Object(s.a)(e),Object(s.a)(n))}))}(e)}}),Object(l.jsx)(j.a,{onClick:function(){n.current.click()},children:"Upload"})]})}var h=n(63),f=n.n(h),O=n(79);n(107);function g(){return new Worker(n.p+"static/js/file.worker.2cec9049.worker.js")}function v(e){var t=e.photos,n=e.setProgress,a=function(){var e=Object(O.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new g).postMessage({photos:t}),a.addEventListener("message",(function(e){if("data"==e.data.name){var t=document.createElement("a");t.href=e.data.data,t.download="x.pdf",document.body.append(t),t.click(),t.remove(),setTimeout((function(){return URL.revokeObjectURL(t.href)}),7e3)}"progress"==e.data.name&&n(e.data.progress)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsx)(j.a,{onClick:a,children:"Merge"})}var p=n(65),m=n(82),x=n.n(m),w=n(72),P=n(73);function k(e){var t=e.photo,n=e.setPhotos,r=e.index,c=e.moveImage,o=e.width,d=e.height,u=Object(a.useRef)(null),b=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=new Image,a=URL.createObjectURL(t.photo);e.onload=function(){var r=function(e,t,n){var a=document.createElement("canvas"),r=e.width,c=e.height;if(console.log(r),console.log(c),r>t){var o=t/r;r=t,c*=o}if(c>n){var i=n/c;c=n,r*=i}a.width=r,a.height=c;var s=a.getContext("2d");return s.drawImage(e,0,0,r,c),s.canvas.toDataURL(e,"image/jpeg",0)}(e,o,d);u.current.src=r,URL.revokeObjectURL(a),n((function(e){return Object(s.a)(e).map((function(e){return e.id==t.id?Object(p.a)(Object(p.a)({},e),{},{src:r,photo:void 0}):e}))}))},e.src=a}),[]);var h=Object(w.a)({accept:"Photo",hover:function(e){if(b.current){var t=e.index,n=r;t!=n&&(c(t,n),e.index=n)}}}),f=Object(i.a)(h,2)[1],O=Object(P.a)({type:"Photo",id:t.id,index:r,item:{type:"Photo",id:t.id,index:r},collect:function(e){return{isDragging:e.isDragging()}}}),g=Object(i.a)(O,2),v=g[0].isDragging;(0,g[1])(f(b));return Object(l.jsxs)("div",{style:{opacity:v?0:1},className:"photo",ref:b,children:[Object(l.jsx)("img",{ref:u}),Object(l.jsx)(j.a,{variant:"contained",color:"secondary",className:"remove",onClick:function(){n((function(e){return e.filter((function(e){return e.id!==t.id}))}))},children:Object(l.jsx)(x.a,{})})]})}var C=n(83),y=n.n(C);function M(e){var t=e.photos,n=e.setPhotos,a=e.width,r=e.height,c=function(e,a){var r=t[e];console.log("dragged Image",e,a,r),n(y()(t,{$splice:[[e,1],[a,0,r]]}))};return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"photos",children:t.map((function(e,t){return Object(l.jsx)(k,{width:a,height:r,photo:e,moveImage:c,index:t,setPhotos:n},e.id)}))})})}var L=n(163),R=n(161),F=n(160),I=n(164),S=n(162),U=n(166);function D(e){var t=e.setPhotos,n=Object(a.useState)("0"),r=Object(i.a)(n,2),c=r[0],o=r[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(I.a,{id:"label",children:"Sorting"}),Object(l.jsxs)(S.a,{labelId:"label",id:"select",value:c,onChange:function(e){var n=e.target.value;o(n),t((function(e){return Object(s.a)(e).sort((function(e,t){return"1"==n?e.lastModified-t.lastModified:"2"==n?t.lastModified-e.lastModified:"3"==n?e.name.localeCompare(t.name):"4"==n?t.name.localeCompare(e.name):e}))}))},children:[Object(l.jsx)(U.a,{value:"0",children:"Custom"}),Object(l.jsx)(U.a,{value:"1",children:"Oldest first"}),Object(l.jsx)(U.a,{value:"2",children:"Newest first"}),Object(l.jsx)(U.a,{value:"3",children:"A-Z"}),Object(l.jsx)(U.a,{value:"4",children:"Z-A"})]})]})}var E=n(114).HTML5Backend,N=n(71).DndProvider;function T(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(0),o=Object(i.a)(c,2),s=o[0],d=o[1],u=Object(a.useState)(1024),j=Object(i.a)(u,2),h=j[0],f=j[1],O=Object(a.useState)(1024),g=Object(i.a)(O,2),p=g[0],m=g[1];Object(a.useEffect)((function(){console.log(n)}),[n]);var x="";return s>0&&s<100&&(x=Object(l.jsx)(F.a,{variant:"determinate",value:100*s})),Object(l.jsxs)(l.Fragment,{children:[x,Object(l.jsx)("br",{}),Object(l.jsx)(D,{setPhotos:r}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[Object(l.jsx)(L.a,{value:h,onChange:function(e){return f(e.target.value)},id:"standard-basic",label:"Max width"}),"\xa0",Object(l.jsx)(L.a,{value:p,onChange:function(e){return m(e.target.value)},id:"standard-basic",label:"Max height"})]}),Object(l.jsx)(N,{backend:E,children:Object(l.jsx)(M,{width:h,height:p,setPhotos:r,photos:n})}),Object(l.jsxs)(R.a,{variant:"contained",color:"primary","aria-label":"contained primary button group",children:[Object(l.jsx)(b,{setPhotos:r}),Object(l.jsx)(v,{photos:n,setProgress:d})]})]})}var A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,167)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(T,{})}),document.getElementById("root")),A()},98:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.792ecb2d.chunk.js.map