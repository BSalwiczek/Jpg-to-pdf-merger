(this["webpackJsonpjpg-to-pdf-merger"]=this["webpackJsonpjpg-to-pdf-merger"]||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(11),o=n.n(c),i=(n(94),n(24)),s=n(28),u=n(72),d=n.n(u),j=n(113),l=n(5);function f(e){var t=e.setPhotos,n=Object(r.createRef)();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",{type:"file",style:{display:"none"},multiple:!0,ref:n,onChange:function(e){return function(e){var n=Array.from(e.target.files).map((function(e){return{id:d()(),photo:e,name:e.name,lastModified:e.lastModified}}));t((function(e){return[].concat(Object(s.a)(e),Object(s.a)(n))}))}(e)}}),Object(l.jsx)(j.a,{onClick:function(){n.current.click()},children:"Upload"})]})}var b=n(62),h=n.n(b),O=n(77);n(103);function v(){return new Worker(n.p+"static/js/file.worker.40bbbbcd.worker.js")}function g(e){var t=e.photos,n=(e.setProgress,function(){var e=Object(O.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new v).postMessage({photos:t}),n.addEventListener("message",(function(e){if("data"==e.data.name){var t=document.createElement("a");t.href=e.data.data,t.download="x.pdf",document.body.append(t),t.click(),t.remove(),setTimeout((function(){return URL.revokeObjectURL(t.href)}),7e3)}}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(l.jsx)(j.a,{onClick:n,children:"Merge"})}var p=n(64),m=n(80),x=n.n(m),P=n(70),k=n(71),w=1920,y=1080;function C(e){var t=e.photo,n=e.setPhotos,a=e.index,c=e.moveImage,o=Object(r.useRef)(null),u=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=new Image,r=URL.createObjectURL(t.photo);e.onload=function(){var a=function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;if(console.log(n),console.log(r),n>w){var a=w/n;n=w,r*=a}if(r>y){var c=y/r;r=y,n*=c}t.width=n,t.height=r;var o=t.getContext("2d");return o.drawImage(e,0,0,n,r),o.canvas.toDataURL(e,"image/jpeg",0)}(e);o.current.src=a,URL.revokeObjectURL(r),n((function(e){return Object(s.a)(e).map((function(e){return e.id==t.id?Object(p.a)(Object(p.a)({},e),{},{src:a,photo:void 0}):e}))}))},e.src=r}),[]);var d=Object(P.a)({accept:"Photo",hover:function(e){if(u.current){var t=e.index,n=a;t!=n&&(c(t,n),e.index=n)}}}),f=Object(i.a)(d,2)[1],b=Object(k.a)({type:"Photo",id:t.id,index:a,item:{type:"Photo",id:t.id,index:a},collect:function(e){return{isDragging:e.isDragging()}}}),h=Object(i.a)(b,2),O=h[0].isDragging;(0,h[1])(f(u));return Object(l.jsxs)("div",{style:{opacity:O?0:1},className:"photo",ref:u,children:[Object(l.jsx)("img",{ref:o}),Object(l.jsx)(j.a,{variant:"contained",color:"secondary",className:"remove",onClick:function(){n((function(e){return e.filter((function(e){return e.id!==t.id}))}))},children:Object(l.jsx)(x.a,{})})]})}var L=n(81),M=n.n(L);function R(e){var t=e.photos,n=e.setPhotos,r=function(e,r){var a=t[e];console.log("dragged Image",e,r,a),n(M()(t,{$splice:[[e,1],[r,0,a]]}))};return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"photos",children:t.map((function(e,t){return Object(l.jsx)(C,{photo:e,moveImage:r,index:t,setPhotos:n},e.id)}))})})}var F=n(153),I=n(152),U=n(155),D=n(154),E=n(156);function S(e){var t=e.setPhotos,n=Object(r.useState)("0"),a=Object(i.a)(n,2),c=a[0],o=a[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(U.a,{id:"label",children:"Sorting"}),Object(l.jsxs)(D.a,{labelId:"label",id:"select",value:c,onChange:function(e){var n=e.target.value;o(n),t((function(e){return Object(s.a)(e).sort((function(e,t){return"1"==n?e.lastModified-t.lastModified:"2"==n?t.lastModified-e.lastModified:"3"==n?e.name.localeCompare(t.name):"4"==n?t.name.localeCompare(e.name):e}))}))},children:[Object(l.jsx)(E.a,{value:"0",children:"Custom"}),Object(l.jsx)(E.a,{value:"1",children:"Oldest first"}),Object(l.jsx)(E.a,{value:"2",children:"Newest first"}),Object(l.jsx)(E.a,{value:"3",children:"A-Z"}),Object(l.jsx)(E.a,{value:"4",children:"Z-A"})]})]})}var N=n(110).HTML5Backend,T=n(69).DndProvider;function A(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(0),o=Object(i.a)(c,2),s=o[0],u=o[1];Object(r.useEffect)((function(){console.log(n)}),[n]);var d="";return s>0&&(d=Object(l.jsx)(I.a,{variant:"determinate",value:s})),Object(l.jsxs)(l.Fragment,{children:[d,Object(l.jsx)("br",{}),Object(l.jsx)(S,{setPhotos:a}),Object(l.jsx)(T,{backend:N,children:Object(l.jsx)(R,{setPhotos:a,photos:n})}),Object(l.jsxs)(F.a,{variant:"contained",color:"primary","aria-label":"contained primary button group",children:[Object(l.jsx)(f,{setPhotos:a}),Object(l.jsx)(g,{photos:n,setProgress:u})]})]})}var B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,157)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(A,{})}),document.getElementById("root")),B()},94:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.d19ba964.chunk.js.map