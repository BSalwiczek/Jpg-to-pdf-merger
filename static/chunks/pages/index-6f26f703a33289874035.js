(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{99656:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var r=n(85893),o=(n(9008),n(25675),n(67294)),i=n(59999),a=n(62830),c=n.n(a),s=n(282);function u(e){var t=e.setPhotos,n=(0,o.createRef)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"file",style:{display:"none"},multiple:!0,ref:n,onChange:function(e){return function(e){var n=Array.from(e.target.files).map((function(e){return{id:c()(),photo:e,name:e.name,lastModified:e.lastModified}}));t((function(e){return[].concat((0,i.Z)(e),(0,i.Z)(n))}))}(e)}}),(0,r.jsx)(s.Z,{onClick:function(){n.current.click()},children:"Upload"})]})}var l=n(91819);n(66905);function d(e){var t=e.photos;e.setProgress;return(0,r.jsx)(s.Z,{onClick:function(){return new Promise((function(e,n){var r=null;t.forEach((function(e,t){var n=new Image;n.src=e.src;var o=n.width/n.height;console.log(o),o<1?0==t?r=new l.kH("p","mm",[n.width,n.height]):r.addPage([n.width,n.height],"p"):0==t?r=new l.kH("l","mm",[n.width,n.height]):r.addPage([n.width,n.height],"l"),r.addImage(n,"JPEG",0,0,n.width,n.height)})),r.save("x.pdf")}))},children:"Merge"})}var f=n(64121),h=n(26265),g=n(47298),v=n(59240),p=n(5200);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=1024,P=1024;function w(e){var t=e.photo,n=e.setPhotos,a=e.index,c=e.moveImage,u=(0,o.useRef)(null),l=(0,o.useRef)(null);(0,o.useEffect)((function(){var e=new Image,r=URL.createObjectURL(t.photo);e.onload=function(){var o=function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;if(console.log(n),console.log(r),n>x){var o=x/n;n=x,r*=o}if(r>P){var i=P/r;r=P,n*=i}t.width=n,t.height=r;var a=t.getContext("2d");return a.drawImage(e,0,0,n,r),a.canvas.toDataURL(e,"image/jpeg",0)}(e);u.current.src=o,URL.revokeObjectURL(r),n((function(e){return(0,i.Z)(e).map((function(e){return e.id==t.id?j(j({},e),{},{src:o,photo:void 0}):e}))}))},e.src=r}),[]);var d=(0,v.L)({accept:"Photo",hover:function(e){if(l.current){var t=e.index,n=a;t!=n&&(c(t,n),e.index=n)}}}),h=(0,f.Z)(d,2)[1],m=(0,p.c)({type:"Photo",id:t.id,index:a,item:{type:"Photo",id:t.id,index:a},collect:function(e){return{isDragging:e.isDragging()}}}),w=(0,f.Z)(m,2),b=w[0].isDragging;(0,w[1])(h(l));return(0,r.jsxs)("div",{style:{opacity:b?0:1},className:"photo",ref:l,children:[(0,r.jsx)("img",{ref:u}),(0,r.jsx)(s.Z,{variant:"contained",color:"secondary",className:"remove",onClick:function(){n((function(e){return e.filter((function(e){return e.id!==t.id}))}))},children:(0,r.jsx)(g.Z,{})})]})}var b=n(7145),y=n.n(b);function O(e){var t=e.photos,n=e.setPhotos,o=function(e,r){var o=t[e];console.log("dragged Image",e,r,o),n(y()(t,{$splice:[[e,1],[r,0,o]]}))};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"photos",children:t.map((function(e,t){return(0,r.jsx)(w,{photo:e,moveImage:o,index:t,setPhotos:n},e.id)}))})})}var Z=n(24837),k=n(33681),E=n(43700),_=n(2404),C=n(46479);function D(e){var t=e.setPhotos,n=(0,o.useState)("0"),a=n[0],c=n[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.Z,{id:"label",children:"Sorting"}),(0,r.jsxs)(_.Z,{labelId:"label",id:"select",value:a,onChange:function(e){var n=e.target.value;c(n),t((function(e){return(0,i.Z)(e).sort((function(e,t){return"1"==n?e.lastModified-t.lastModified:"2"==n?t.lastModified-e.lastModified:"3"==n?e.name.localeCompare(t.name):"4"==n?t.name.localeCompare(e.name):e}))}))},children:[(0,r.jsx)(C.Z,{value:"0",children:"Custom"}),(0,r.jsx)(C.Z,{value:"1",children:"Oldest first"}),(0,r.jsx)(C.Z,{value:"2",children:"Newest first"}),(0,r.jsx)(C.Z,{value:"3",children:"A-Z"}),(0,r.jsx)(C.Z,{value:"4",children:"Z-A"})]})]})}var N=n(57865).PD,I=n(73945).WG;function R(){var e=(0,o.useState)([]),t=e[0],n=e[1],i=(0,o.useState)(0),a=i[0],c=i[1];(0,o.useEffect)((function(){console.log(t)}),[t]);var s="";return a>0&&(s=(0,r.jsx)(k.Z,{variant:"determinate",value:a})),(0,r.jsxs)(r.Fragment,{children:[s,(0,r.jsx)("br",{}),(0,r.jsx)(D,{setPhotos:n}),(0,r.jsx)(I,{backend:N,children:(0,r.jsx)(O,{setPhotos:n,photos:t})}),(0,r.jsxs)(Z.Z,{variant:"contained",color:"primary","aria-label":"contained primary button group",children:[(0,r.jsx)(u,{setPhotos:n}),(0,r.jsx)(d,{photos:t,setProgress:c})]})]})}},78581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(99656)}])}},function(e){e.O(0,[774,847,684,888,179],(function(){return t=78581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);